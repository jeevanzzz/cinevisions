{% extends "base.html" %}

{% block preloader %}
<!-- ================= VIDEO PRELOADER ONLY ================= -->
<div id="video-preloader">
    <video autoplay muted playsinline>
        <source src="{{ url_for('static', filename='videos/cinevision_logo_preloader.mp4') }}" type="video/mp4">
    </video>
</div>
{% endblock %}

{% block content %}

<!-- Custom Styles Moved to style.css -->

<!-- === HOME SECTION === -->
<div id="home" class="snap-section hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <h1 class="hero-title">CINEVISIONS</h1>
        <p class="hero-tagline">Framing Life’s Beautiful Moments</p>

        <div class="d-flex gap-3 justify-content-center">
            <a href="/portfolio#featured-portfolio" class="hero-portfolio-btn">
                VIEW PORTFOLIO
            </a>

            <a href="/contact#get-in-touch" class="btn-outline hero-contact-btn">
                GET IN TOUCH
            </a>

        </div>
    </div>
</div>

<!-- === CINEMATIC SLIDING BRAND TEXT) === -->
<section class="brand-marquee-section">
    <div class="sliding-marquee-wrapper">
        <div class="sliding-marquee">
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
            <span>CINEVISIONS FILM MAKERS</span>
        </div>
    </div>

</section>


<div id="about" class="snap-section light-section">
    <div class="container py-5">
        <div class="row align-items-center">

            <!-- TEXT -->
            <div class="col-md-6 position-relative">
                <span class="hero-tag">Cinevisions Film Makers</span>

                <h2 class="display-5 mt-3 mb-4">
                    Your Story, Our Vision Let’s Create Magic Together!
                </h2>

                <p class="about-text" style="font-size: 1.25rem; line-height: 1.7;">Every Love Story Deserves a
                    Cinematic Masterpiece</p>
                <p class="about-text" style="font-size: 1.25rem; line-height: 1.7;">CineVisions captures weddings and
                    events with emotion-driven storytelling,
                    transforming real moments
                    into films that feel timeless, personal, and unforgettable.</p>
                <p class="about-text" style="font-size: 1.25rem; line-height: 1.7;">More Than Videos — We Create
                    Experiences</p>
                <p class="about-text" style="font-size: 1.25rem; line-height: 1.7;">With a modern cinematic approach and
                    artistic precision, we craft films that don't
                    just show what
                    happened, but make you feel every moment again. Relive Your Moments. Forever.</p>

                <div class="row mt-4">
                </div>
            </div>

            <!-- IMAGE CAROUSEL -->
            <div class="col-md-6 text-center">
                <div id="homeCarousel" class="carousel slide shadow-lg" data-bs-ride="carousel" data-bs-interval="2000"
                    style="max-width: 60%; margin: 0 auto;">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="static/images/Home_story.jpg" class="img-fluid rounded-4" alt="Image 1">
                        </div>
                        <div class="carousel-item">
                            <img src="static/images/Home_story_2.jpg" class="img-fluid rounded-4" alt="Image 2">
                        </div>
                        <div class="carousel-item">
                            <img src="static/images/Home_story_3.jpg" class="img-fluid rounded-4" alt="Image 3">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<!-- === SERVICES SECTION === -->
<div id="services" class="snap-section light-section">
    <div class="container py-5">

        <div class="text-center mb-5" data-aos="fade-up">

            <h2 class="display-5 mt-3 mb-4">“Unleashing the Full Potential of Your Moments with Creativity and Vision”
            </h2>
        </div>

        <!-- WEDDING -->
        <div class="row align-items-center service-box active fade-slide" id="wedding">
            <div class="col-md-6">
                <img src="/static/images/wedding.jpg" class="img-fluid rounded-4 shadow service-lightbox-img">
            </div>
            <div class="col-md-6">

                <!-- HEADING AND DESCRIPTION -->
                <h3>Wedding Films</h3>
                <p>Emotion-driven cinematic wedding films crafted with elegance and precision.
                    Every frame tells a timeless story of love and celebration.</p>

                <!-- RIGHT SIDE BUTTONS -->
                <div class="service-tabs-right mb-3">
                    <button class="service-tab active" onclick="showService('wedding', this)">Wedding</button>
                    <button class="service-tab" onclick="showService('pre', this)">Pre-Wedding</button>
                    <button class="service-tab" onclick="showService('vintage', this)">Vintage Shoot</button>
                </div>

                <a href="/services#wedding"
                    class="btn btn btn-orange mt-3 rounded-pill px-4 explore-service-btn">Explore Our Service</a>
            </div>
        </div>

        <!-- PRE-WEDDING -->
        <div class="row align-items-center service-box fade-slide" id="pre">
            <div class="col-md-6">
                <img src="/static/images/prewedding.jpg" class="img-fluid rounded-4 shadow service-lightbox-img">
            </div>
            <div class="col-md-6">
                <h3>Pre-Wedding</h3>
                <p>Artistic and romantic visuals that reflect your unique journey together.
                    A perfect blend of emotion, style, and storytelling before the big day.</p>

                <div class="service-tabs-right mb-3">
                    <button class="service-tab" onclick="showService('wedding', this)">Wedding</button>
                    <button class="service-tab active" onclick="showService('pre', this)">Pre-Wedding</button>
                    <button class="service-tab" onclick="showService('vintage', this)">Vintage Shoot</button>
                </div>
                <a href="/services#pre" class="btn btn btn-orange mt-3 rounded-pill px-4 explore-service-btn">Explore
                    Our Service</a>
            </div>
        </div>



        <!-- VINTAGE -->
        <div class="row align-items-center service-box fade-slide" id="vintage">
            <div class="col-md-6">
                <img src="/static/images/vintage.jpg" class="img-fluid rounded-4 shadow service-lightbox-img">
            </div>
            <div class="col-md-6">
                <h3>Vintage Shoot</h3>
                <p>Classic aesthetics infused with timeless storytelling and mood.
                    Creating visuals that evoke nostalgia with refined elegance</p>

                <div class="service-tabs-right mb-3">
                    <button class="service-tab" onclick="showService('wedding', this)">Wedding</button>
                    <button class="service-tab" onclick="showService('pre', this)">Pre-Wedding</button>
                    <button class="service-tab active" onclick="showService('vintage', this)">Vintage Shoot</button>
                </div>
                <a href="/services#vintage"
                    class="btn btn btn-orange mt-3 rounded-pill px-4 explore-service-btn">Explore Our Service</a>
            </div>
        </div>




    </div>
</div>


<!-- === PORTFOLIO SECTION === -->
<div id="portfolio" class="snap-section dark-section">
    <div class="container-fluid px-5">

        <div class="mb-5">
            <h2 class="gold text-center">Featured Portfolio</h2>
            <p class="text-center text-secondary">
                A glimpse of our recent work
            </p>
        </div>

        <!-- HORIZONTAL SCROLL -->
        <div class="portfolio-scroll">

            {% for p in data %}
            <div class="portfolio-card" data-bs-toggle="modal" data-bs-target="#featuredPortfolioModal"
                data-slide-to="{{ loop.index0 }}">

                <div class="portfolio-media">
                    {% if p.media_type == "image" %}
                    <img src="{{ url_for('static', filename=p.path) }}" loading="lazy">
                    {% else %}
                    <video muted autoplay loop playsinline>
                        <source src="{{ url_for('static', filename=p.path) }}">
                    </video>
                    {% endif %}
                </div>


            </div>
            {% endfor %}

        </div>

        <!-- LIGHTBOX CAROUSEL MODAL -->
        <div class="modal fade" id="featuredPortfolioModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content bg-transparent border-0">
                    <div class="modal-body p-0 position-relative">

                        <!-- CLOSE BUTTON -->
                        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3 z-3"
                            data-bs-dismiss="modal" aria-label="Close"></button>

                        <!-- CAROUSEL -->
                        <div id="featuredCarousel" class="carousel slide" data-bs-interval="false">
                            <div class="carousel-inner text-center">
                                {% for p in data %}
                                <div class="carousel-item {% if loop.first %}active{% endif %}">
                                    {% if p.media_type == "image" %}
                                    <img src="{{ url_for('static', filename=p.path) }}"
                                        class="img-fluid rounded shadow-lg" style="max-height: 90vh;">
                                    {% else %}
                                    <video controls class="img-fluid rounded shadow-lg"
                                        style="max-height: 90vh; width: 100%;">
                                        <source src="{{ url_for('static', filename=p.path) }}">
                                    </video>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>

                            <!-- CONTROLS -->
                            <button class="carousel-control-prev" type="button" data-bs-target="#featuredCarousel"
                                data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#featuredCarousel"
                                data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ===== CINEMATIC FEATURE VIDEO ===== -->
<section class="feature-film-section">
    <div class="container">
        <div class="feature-grid">

            <!-- VIDEO -->
            <div class="feature-video fade-in">
                <div class="cine-video-wrapper">
                    <video id="featureVideo" muted autoplay loop playsinline preload="metadata"
                        poster="{{ url_for('static', filename='images/feature-poster.jpg') }}">
                        <source src="{{ url_for('static', filename='videos/signature-film.mp4') }}" type="video/mp4">
                    </video>

                    <!-- Play Overlay -->
                    <div class="custom-play-btn" id="customPlayBtn">
                        <i class="fas fa-play"></i>
                    </div>
                </div>
            </div>

            <!-- TEXT -->
            <div class="feature-content fade-in">
                <span class="feature-tag">FEATURED FILM</span>

                <h2>A Cinematic Story<br>Worth Remembering</h2>

                <p>
                    This featured film represents the heart of CineVisions —
                    emotion-driven storytelling, authentic moments, and
                    cinematic visuals crafted with precision and passion.
                </p>

                <ul class="feature-points">
                    <li>Real emotions & candid moments</li>
                    <li>Cinematic color grading</li>
                    <li>Storytelling with elegance</li>
                </ul>

                <a href="/portfolio" class="feature-btn">
                    Explore Full Portfolio
                </a>
            </div>

        </div>
    </div>
</section>

<!-- === INSTAGRAM RECENT POSTS === -->
<section class="instagram-section">
    <div class="container">

        <h2 class="insta-title">
            <span>Recent</span> Posts
        </h2>

        <div class="insta-scroll">

            <div class="insta-card">
                <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/DOqXe39jaFb/"
                    data-instgrm-version="14">
                </blockquote>
            </div>

            <div class="insta-card">
                <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/DNGP_HRM7bK/"
                    data-instgrm-version="14">
                </blockquote>
            </div>

            <div class="insta-card">
                <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/DB9bDihOd0t/"
                    data-instgrm-version="14">
                </blockquote>
            </div>

        </div>
    </div>
</section>

<!-- LOAD INSTAGRAM SCRIPT ONLY ONCE -->
<script async src="https://www.instagram.com/embed.js"></script>

<!-- === CLIENT FEEDBACK PREVIEW === -->
<section class="home-feedback-section">
    <div class="container text-center">

        <span class="hero-tag">Client Words</span>
        <h2 class="display-6 mt-3 mb-5">What Our Clients Say</h2>

        <div class="row g-4 justify-content-center">

            <!-- Feedback 1 -->
            <div class="col-md-4">
                <div class="feedback-card">
                    <p>
                        “CineVisions captured our wedding beautifully. Every emotion,
                        every detail felt cinematic and timeless.”
                    </p>
                    <div class="stars">★★★★★</div>
                    <h6 class="mt-2">— Ananya & Rohit</h6>
                </div>
            </div>

            <!-- Feedback 2 -->
            <div class="col-md-4">
                <div class="feedback-card">
                    <p>
                        “Professional, creative, and extremely passionate.
                        The final film exceeded all our expectations.”
                    </p>
                    <div class="stars">★★★★★</div>
                    <h6 class="mt-2">— Sneha M.</h6>
                </div>
            </div>

            <!-- Feedback 3 -->
            <div class="col-md-4">
                <div class="feedback-card">
                    <p>
                        “From concept to delivery, the experience was seamless.
                        Truly masters of storytelling.”
                    </p>
                    <div class="stars">★★★★★</div>
                    <h6 class="mt-2">— Karthik R.</h6>
                </div>
            </div>

        </div>

        <!-- CTA Button -->
        <div class="mt-5">
            <a href="/contact#feedback" class="btn btn-warning px-5 rounded-pill">
                Share Your Experience
            </a>
        </div>

    </div>
</section>

<!-- === CONNECT WITH CINEVISIONS === -->
<section class="connect-section" id="get-in-touch">
    <div class="container">
        <div class="row align-items-center">

            <!-- LEFT : TEXT INFO -->
            <div class="col-md-6">
                <span class="hero-tag">Get In Touch</span>
                <h2 class="connect-title">Connect with Our<br>Photography Team</h2>

                <p class="connect-sub">
                    We’d love to hear from you! Whether you’re planning a wedding,
                    a special event, or a cinematic shoot — let’s talk.
                </p>

                <div class="connect-info">
                    <div class="info-item">
                        <i class="fas fa-location-dot"></i>
                        <div>
                            <h6>Head Office Location</h6>
                            <p>Mangaluru, Karnataka – 574233</p>
                        </div>
                    </div>

                    <div class="info-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h6>Email Us</h6>
                            <p>gowdasuketh@gmail.com</p>
                        </div>
                    </div>

                    <div class="info-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h6>Call Us</h6>
                            <p>+91 63614 82911</p>
                        </div>
                    </div>
                </div>

                <!-- CTA -->
                <a href="https://wa.me/916361482911?text=Hello%20CINEVISIONS,%20I%20would%20like%20to%20enquire%20about%20your%20services."
                    target="_blank" class="btn btn-warning connect-btn">
                    Let’s Talk
                </a>
            </div>

            <!-- RIGHT : MAP -->
            <div class="col-md-6 mt-4 mt-md-0">
                <div class="connect-map">
                    <iframe src="https://www.google.com/maps?q=12.952837,75.1267776&hl=en&z=16&output=embed"
                        loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>

        </div>
    </div>
</section>

{% endblock %}

<!-- Styles moved to style.css -->

{% block scripts %}
<script>
    function showService(id, btn) {
        // Check if we're on the home page or services page
        const servicesSection = document.getElementById('services');

        // If we're not on services section, navigate to services page with anchor
        if (!servicesSection) {
            window.location.href = '/services#' + id;
            return;
        }

        // Hide all boxes
        document.querySelectorAll('.service-box').forEach(box => {
            box.classList.remove('active');
            box.style.opacity = '0';
            setTimeout(() => {
                if (!box.classList.contains('active')) box.style.display = 'none';
            }, 500);
        });

        // 1. Show target box
        const target = document.getElementById(id);
        if (target) {
            target.style.display = 'flex';
            // Trigger reflow
            void target.offsetWidth;
            target.classList.add('active');
            target.style.opacity = '1';
        }

        // 2. Update Active State in ALL button lists to match the new selection
        document.querySelectorAll('.service-tab').forEach(b => {
            b.classList.remove('active');
            // If this button corresponds to the clicked text/id, make it active
            if (b.textContent.trim() === btn.textContent.trim()) {
                b.classList.add('active');
            }
            if (b === btn) b.classList.add('active');
        });
    }

    // Lightbox for service images
    document.addEventListener("DOMContentLoaded", function () {
        const lightbox = document.getElementById("lightbox");
        const lightboxImg = document.querySelector(".lightbox-img");
        document.querySelectorAll('.service-lightbox-img').forEach(img => {
            img.style.cursor = 'pointer';
            img.addEventListener('click', function () {
                if (lightbox && lightboxImg) {
                    lightbox.style.display = "flex";
                    lightboxImg.src = this.src;
                }
            });
        });
    });

    // Smooth Auto Scroll for Featured Portfolio & Click Handling
    document.addEventListener("DOMContentLoaded", function () {
        const scrollContainer = document.querySelector('.portfolio-scroll');
        if (!scrollContainer) return;

        // --- Event Delegation for Clicks (Fixes Cloned Items & Linter) ---
        scrollContainer.addEventListener('click', function (e) {
            const card = e.target.closest('.portfolio-card');
            if (card && card.hasAttribute('data-slide-to')) {
                const index = parseInt(card.getAttribute('data-slide-to'));

                // Initialize/Get Carousel and Go to Slide
                var myCarousel = document.getElementById('featuredCarousel');
                var carousel = new bootstrap.Carousel(myCarousel);
                carousel.to(index);
            }
        });

        // --- Auto Scroll Logic ---
        let scrollAmount = 0;
        let speed = 1.8;
        let isHovered = false;

        // Clone content to create infinite loop effect
        const content = scrollContainer.innerHTML;
        scrollContainer.innerHTML += content;

        function autoScroll() {
            if (!isHovered) {
                scrollAmount += speed;
                // Reset when half is scrolled (since we duplicated content)
                if (scrollAmount >= scrollContainer.scrollWidth / 2) {
                    scrollAmount = 0;
                }
                scrollContainer.scrollLeft = scrollAmount;
            }
            requestAnimationFrame(autoScroll);
        }

        // Pause on hover
        scrollContainer.addEventListener('mouseenter', () => isHovered = true);
        scrollContainer.addEventListener('mouseleave', () => isHovered = false);

        // Also pause when touching on mobile
        scrollContainer.addEventListener('touchstart', () => isHovered = true);
        scrollContainer.addEventListener('touchend', () => {
            setTimeout(() => isHovered = false, 2000);
        });

        // Start scrolling
        requestAnimationFrame(autoScroll);
    });
</script>


<!-- Dynamic Scroll Button -->
<button id="toggleScrollBtn" aria-label="Scroll to bottom">
    <i class="fas fa-arrow-down"></i>
</button>

{% endblock %}