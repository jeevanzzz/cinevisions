{% extends "base.html" %}
{% block content %}

<div class="container py-5">
  <a href="/dashboard" class="btn btn-outline-warning mb-3">
    <i class="fas fa-arrow-left me-2"></i> Back to Dashboard
  </a>

  <!-- PAGE HEADER -->
  <div class="mb-4">
    <h2 class="fw-bold" style="color: var(--primary);">
      Uploaded Media
    </h2>
    <p class="text-secondary">
      Manage and organize your portfolio content
    </p>
  </div>

  <!-- MEDIA TABLE -->
  <div class="table-responsive">
    <table class="table table-dark table-bordered align-middle">

      <thead>
        <tr>
          <th>Title</th>
          <th>Category</th>
          <th>Preview</th>
          <th>Type</th>
          <th class="text-center" style="width:200px;">Actions</th>
        </tr>
      </thead>

      <tbody>
        {% for m in media %}
        <tr>

          <!-- TITLE -->
          <td class="fw-semibold text-white">
            {{ m.title }}
          </td>

          <!-- CATEGORY -->
          <td class="text-secondary">
            {{ m.category }}
          </td>

          <!-- PREVIEW -->
          <td>
            {% if m.media_type == "image" %}
            <img src="{{ url_for('static', filename='uploads/' + m.filename) }}" class="media-thumb">
            {% else %}
            <video class="media-thumb" muted>
              <source src="{{ url_for('static', filename='uploads/' + m.filename) }}">
            </video>
            {% endif %}
          </td>

          <!-- TYPE -->
          <td>
            <span class="badge bg-secondary text-uppercase">
              {{ m.media_type }}
            </span>
          </td>

          <!-- ACTION BUTTONS -->
          <td class="text-center">
            <div class="btn-group btn-group-sm" role="group">
              <a href="{{ url_for('static', filename='uploads/' + m.filename) }}" target="_blank"
                class="btn btn-outline-info" title="View">
                <i class="fas fa-eye"></i>
              </a>
              <a href="/edit/{{ m.id }}" class="btn btn-outline-warning" title="Edit">
                <i class="fas fa-edit"></i>
              </a>
              <a href="/download/{{ m.id }}" class="btn btn-outline-light" title="Download">
                <i class="fas fa-download"></i>
              </a>
              <a href="/delete/{{ m.id }}" class="btn btn-outline-danger"
                onclick="return confirm('Are you sure you want to delete this media?')" title="Delete">
                <i class="fas fa-trash"></i>
              </a>
            </div>
          </td>

        </tr>
        {% endfor %}
      </tbody>

    </table>
  </div>

</div>

{% endblock %}